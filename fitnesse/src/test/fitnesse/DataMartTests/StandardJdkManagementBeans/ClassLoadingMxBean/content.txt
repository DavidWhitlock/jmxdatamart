!contents -R2 -g -p -f -h

This test makes sure that we can extract and load instances of java.lang.management.ClassLoadingMXBean (http://docs.oracle.com/javase/6/docs/api/java/lang/management/ClassLoadingMXBean.html)

| org.jmxdatamart.fixtures.ExtractAndLoadTest |

!| configure extractor |
| extract statistics every | 500 | milliseconds |
| write statistics to directory | ClassLoadingMxBean/statistics |

!| configure MBeans to be extracted |
| bean name | bean alias | attribute | attribute alias |
| java.lang:type=ClassLoading | ClassLoading | Verbose |  |
| java.lang:type=ClassLoading | ClassLoading | LoadedClassCount |  |
| java.lang:type=ClassLoading | ClassLoading | TotalLoadedClassCount |  |
| java.lang:type=ClassLoading | ClassLoading | UnloadedClassCount |  |

Then we give the collector some time to do its thing

| collect statistics for | 2 | seconds |

Then we load the statistics file into the data mart

!| load statistics |
| from file | ClassLoadingMxBean/statistics.dat |
| into database with url | ${derby.url};user=${derby.username};password=${derby.username} |

Finally, we verify that the statistics were loaded as expected

Connect to the JMX Data Mart database

!|Connect|${derby.url};user=${derby.username};password=${derby.username}|
